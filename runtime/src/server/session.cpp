#include "pch.h"
#include "session.hpp"

namespace server
{
	//////////////////////////////////////////////////////////////////////////
	Session::Session(TServerSid sid)
		: _sid(sid)
	{

	}

	//////////////////////////////////////////////////////////////////////////
	void Session::listenStop(function<void ()> sstop)
	{
		_sstop = sstop;
	}

	//////////////////////////////////////////////////////////////////////////
	void Session::close()
	{
		net::ChannelHub<ISession>::close();
		if(_sstop)
		{
			function<void ()> sstop;
			sstop.swap(_sstop);
			sstop();
		}
	}


	//////////////////////////////////////////////////////////////////////////
	TServerSid Session::sid()
	{
		return _sid;
	}
}
