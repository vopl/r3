#include "stdafx.h"
#include "select.hpp"
#include "pgs/meta/cluster.hpp"

namespace pgs
{
	namespace impl
	{
		//////////////////////////////////////////////////////////////////////////
		Select::Select()
		{

		}

		//////////////////////////////////////////////////////////////////////////
		Select &Select::whats(Expression e)
		{
			_what.push_back(e);
			return *this;
		}

		//////////////////////////////////////////////////////////////////////////
		Select &Select::from(Category c)
		{
			_from = c;
			return *this;
		}

		//////////////////////////////////////////////////////////////////////////
		Select &Select::links(Link l)
		{
			_links.push_back(l);
			return *this;
		}

		//////////////////////////////////////////////////////////////////////////
		Select &Select::where(Expression e)
		{
			//перебрать дерево выражения, проверить наличие всех полей, собрать все переменные
			_where = e;
			return *this;
		}

		//////////////////////////////////////////////////////////////////////////
		Select &Select::limit(Expression e)
		{
			_limit = e;
			return *this;
		}

		//////////////////////////////////////////////////////////////////////////
		Select &Select::offset(Expression e)
		{
			_offset = e;
			return *this;
		}

		//////////////////////////////////////////////////////////////////////////
		Select &Select::orders(Order o)
		{
			_orders.push_back(o);
			return *this;
		}

		//////////////////////////////////////////////////////////////////////////
		bool Select::compile(std::string &sql)
		{
			assert(0);
			return false;
		}
	}
}
